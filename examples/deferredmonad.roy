let deferred = {
  return: \x -> $.when x
  bind: \x f ->
    let dfd = $.Deferred ()
    x.done (\val ->
      (f val).done dfd.resolve
    )
    dfd.promise ()
}

let v = do deferred
  val <- $.ajax 'examples/helloworld.roy'
  val2 <- $.ajax 'examples/alias.roy'
  return val ++ val2

v.done (\x ->
  console.log x
)
